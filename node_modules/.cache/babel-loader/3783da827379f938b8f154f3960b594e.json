{"ast":null,"code":"var _jsxFileName = \"/Users/mathieujoly/Documents/Next_THP/Semaine07/J31/the-K/the-k/src/pages/Login/Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useForm } from \"react-hook-form\";\nimport Cookies from 'js-cookie';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setID } from 'actions';\nimport { useHistory } from 'react-router-dom';\nimport jwt_decode from \"jwt-decode\";\nimport './Login.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const isLogged = useSelector(state => state.isLogged);\n  const dispatch = useDispatch();\n  const {\n    register,\n    handleSubmit,\n    watch,\n    errors\n  } = useForm();\n  const history = useHistory();\n\n  const onSubmit = data => {\n    console.log(data);\n    fetch('http://localhost:1337/auth/local/register', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(response => response.json()).then(response => {\n      console.log(response);\n      dispatch(setID(response.user.id));\n      console.log(jwt_decode(response.jwt));\n      Cookies.set('token', response.jwt);\n      history.push(\"/\");\n    }); //wait for response (then response, data to JSON)\n    //catch errors\n    //cookie\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      className: \"Register\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"username\",\n        type: \"text\",\n        placeholder: \"username\",\n        ref: register({\n          required: true\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"email\",\n        type: \"email\",\n        placeholder: \"email\",\n        ref: register({\n          required: true\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"password\",\n        type: \"password\",\n        placeholder: \"password\",\n        ref: register({\n          required: true\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Login, \"Bb1IG5oLrsdxfrOkP/Aokwlbl3Y=\", false, function () {\n  return [useSelector, useDispatch, useForm, useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/mathieujoly/Documents/Next_THP/Semaine07/J31/the-K/the-k/src/pages/Login/Login.jsx"],"names":["React","useForm","Cookies","useSelector","useDispatch","setID","useHistory","jwt_decode","Login","isLogged","state","dispatch","register","handleSubmit","watch","errors","history","onSubmit","data","console","log","fetch","method","headers","body","JSON","stringify","then","response","json","user","id","jwt","set","push","required"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,KAAT,QAAsB,SAAtB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAO,cAAP;;;AAEA,MAAMC,KAAK,GAAG,MAAM;AAAA;;AACnB,QAAMC,QAAQ,GAAGN,WAAW,CAACO,KAAK,IAAIA,KAAK,CAACD,QAAhB,CAA5B;AACE,QAAME,QAAQ,GAAGP,WAAW,EAA5B;AAEF,QAAM;AAAEQ,IAAAA,QAAF;AAAYC,IAAAA,YAAZ;AAA0BC,IAAAA,KAA1B;AAAiCC,IAAAA;AAAjC,MAA4Cd,OAAO,EAAzD;AACA,QAAMe,OAAO,GAAGV,UAAU,EAA1B;;AACE,QAAMW,QAAQ,GAAGC,IAAI,IAAI;AACxBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAG,IAAAA,KAAK,CAAC,2CAAD,EAA8C;AACjDC,MAAAA,MAAM,EAAE,MADyC;AAEjDC,MAAAA,OAAO,EAAE;AACT,wBAAgB;AADP,OAFwC;AAKjDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,IAAf;AAL2C,KAA9C,CAAL,CAODS,IAPC,CAOKC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAPlB,EAQDF,IARC,CAQKC,QAAD,IAAc;AACnBT,MAAAA,OAAO,CAACC,GAAR,CAAYQ,QAAZ;AACAjB,MAAAA,QAAQ,CAACN,KAAK,CAACuB,QAAQ,CAACE,IAAT,CAAcC,EAAf,CAAN,CAAR;AACAZ,MAAAA,OAAO,CAACC,GAAR,CAAYb,UAAU,CAACqB,QAAQ,CAACI,GAAV,CAAtB;AACA9B,MAAAA,OAAO,CAAC+B,GAAR,CAAY,OAAZ,EAAqBL,QAAQ,CAACI,GAA9B;AACAhB,MAAAA,OAAO,CAACkB,IAAR,CAAa,GAAb;AACA,KAdC,EAFwB,CAiB1B;AACA;AACA;AAEE,GArBD;;AAuBF,sBACC;AAAA,2BACE;AAAM,MAAA,QAAQ,EAAErB,YAAY,CAACI,QAAD,CAA5B;AAAwC,MAAA,SAAS,EAAC,UAAlD;AAAA,8BACE;AAAO,QAAA,IAAI,EAAC,UAAZ;AAAuB,QAAA,IAAI,EAAC,MAA5B;AAAmC,QAAA,WAAW,EAAC,UAA/C;AAA0D,QAAA,GAAG,EAAEL,QAAQ,CAAC;AAAEuB,UAAAA,QAAQ,EAAE;AAAZ,SAAD;AAAvE;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAO,QAAA,IAAI,EAAC,OAAZ;AAAoB,QAAA,IAAI,EAAC,OAAzB;AAAiC,QAAA,WAAW,EAAC,OAA7C;AAAqD,QAAA,GAAG,EAAEvB,QAAQ,CAAC;AAAEuB,UAAAA,QAAQ,EAAE;AAAZ,SAAD;AAAlE;AAAA;AAAA;AAAA;AAAA,cAFF,eAGE;AAAO,QAAA,IAAI,EAAC,UAAZ;AAAuB,QAAA,IAAI,EAAC,UAA5B;AAAuC,QAAA,WAAW,EAAC,UAAnD;AAA8D,QAAA,GAAG,EAAEvB,QAAQ,CAAC;AAAEuB,UAAAA,QAAQ,EAAE;AAAZ,SAAD;AAA3E;AAAA;AAAA;AAAA;AAAA,cAHF,eAII;AAAO,QAAA,IAAI,EAAC;AAAZ;AAAA;AAAA;AAAA;AAAA,cAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADD;AAUA,CAvCD;;GAAM3B,K;UACYL,W,EACEC,W,EAE+BH,O,EAClCK,U;;;KALXE,K;AAyCN,eAAeA,KAAf","sourcesContent":["import React from 'react';\nimport { useForm } from \"react-hook-form\";\nimport Cookies from 'js-cookie'\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setID } from 'actions';\nimport { useHistory } from 'react-router-dom';\nimport jwt_decode from \"jwt-decode\";\nimport './Login.scss';\n\nconst Login = () => {\n\tconst isLogged = useSelector(state => state.isLogged);\n  \tconst dispatch = useDispatch();\n\n\tconst { register, handleSubmit, watch, errors } = useForm();\n\tconst history = useHistory();\n  \tconst onSubmit = data => {\n  \t\tconsole.log(data);\n  \t\tfetch('http://localhost:1337/auth/local/register', {\n  \t\t  method: 'post',\n  \t\t  headers: {\n    \t\t'Content-Type': 'application/json'\n  \t\t  },\n  \t\t  body: JSON.stringify(data)\n\t\t})\n\t\t.then((response) => response.json())\n\t\t.then((response) => {\n\t\t\tconsole.log(response);\n\t\t\tdispatch(setID(response.user.id));\n\t\t\tconsole.log(jwt_decode(response.jwt))\n\t\t\tCookies.set('token', response.jwt);\n\t\t\thistory.push(\"/\");\n\t\t})\n\t\t//wait for response (then response, data to JSON)\n\t\t//catch errors\n\t\t//cookie\n\t\t\n  \t}\n\n\treturn (\n\t\t<div>\n\t\t  <form onSubmit={handleSubmit(onSubmit)} className=\"Register\">\n\t\t    <input name=\"username\" type=\"text\" placeholder=\"username\" ref={register({ required: true })} />\n\t\t    <input name=\"email\" type=\"email\" placeholder=\"email\" ref={register({ required: true })} />\n\t\t    <input name=\"password\" type=\"password\" placeholder=\"password\" ref={register({ required: true })} />\n\t  \t    <input type=\"submit\" />\n\t      </form>\n\t    </div>\n\t);\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}