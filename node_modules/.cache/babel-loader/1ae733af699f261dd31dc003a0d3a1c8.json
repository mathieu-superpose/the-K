{"ast":null,"code":"var _jsxFileName = \"/Users/mathieujoly/Documents/Next_THP/Semaine07/J31/the-K/the-k/src/pages/Register/Register.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useForm } from \"react-hook-form\";\nimport Cookies from 'js-cookie';\nimport { Redirect } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { logIn } from 'actions';\nimport { useHistory } from 'react-router-dom';\nimport './Register.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Register = () => {\n  _s();\n\n  const isLogged = useSelector(state => state.isLogged);\n  const dispatch = useDispatch();\n  const {\n    register,\n    handleSubmit,\n    watch,\n    errors\n  } = useForm();\n  const history = useHistory();\n\n  const onSubmit = data => {\n    console.log(data);\n    fetch('http://localhost:1337/auth/local/register', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }); //wait for response (then response, data to JSON)\n    //catch errors\n    //cookie\n\n    dispatch(logIn());\n    history.push(\"/\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    className: \"Register\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"username\",\n      type: \"text\",\n      placeholder: \"username\",\n      ref: register({\n        required: true\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"email\",\n      type: \"email\",\n      placeholder: \"email\",\n      ref: register({\n        required: true\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"password\",\n      type: \"password\",\n      placeholder: \"password\",\n      ref: register({\n        required: true\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Register, \"Bb1IG5oLrsdxfrOkP/Aokwlbl3Y=\", false, function () {\n  return [useSelector, useDispatch, useForm, useHistory];\n});\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/Users/mathieujoly/Documents/Next_THP/Semaine07/J31/the-K/the-k/src/pages/Register/Register.jsx"],"names":["React","useForm","Cookies","Redirect","useSelector","useDispatch","logIn","useHistory","Register","isLogged","state","dispatch","register","handleSubmit","watch","errors","history","onSubmit","data","console","log","fetch","method","headers","body","JSON","stringify","push","required"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,KAAT,QAAsB,SAAtB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAO,iBAAP;;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AAAA;;AACtB,QAAMC,QAAQ,GAAGL,WAAW,CAACM,KAAK,IAAIA,KAAK,CAACD,QAAhB,CAA5B;AACE,QAAME,QAAQ,GAAGN,WAAW,EAA5B;AAEF,QAAM;AAAEO,IAAAA,QAAF;AAAYC,IAAAA,YAAZ;AAA0BC,IAAAA,KAA1B;AAAiCC,IAAAA;AAAjC,MAA4Cd,OAAO,EAAzD;AACA,QAAMe,OAAO,GAAGT,UAAU,EAA1B;;AACE,QAAMU,QAAQ,GAAGC,IAAI,IAAI;AACxBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAG,IAAAA,KAAK,CAAC,2CAAD,EAA8C;AACjDC,MAAAA,MAAM,EAAE,MADyC;AAEjDC,MAAAA,OAAO,EAAE;AACT,wBAAgB;AADP,OAFwC;AAKjDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,IAAf;AAL2C,KAA9C,CAAL,CAFwB,CAS1B;AACA;AACA;;AACAP,IAAAA,QAAQ,CAACL,KAAK,EAAN,CAAR;AACAU,IAAAA,OAAO,CAACW,IAAR,CAAa,GAAb;AACE,GAdD;;AAgBF,sBACC;AAAM,IAAA,QAAQ,EAAEd,YAAY,CAACI,QAAD,CAA5B;AAAwC,IAAA,SAAS,EAAC,UAAlD;AAAA,4BACE;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAuB,MAAA,IAAI,EAAC,MAA5B;AAAmC,MAAA,WAAW,EAAC,UAA/C;AAA0D,MAAA,GAAG,EAAEL,QAAQ,CAAC;AAAEgB,QAAAA,QAAQ,EAAE;AAAZ,OAAD;AAAvE;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,IAAI,EAAC,OAAzB;AAAiC,MAAA,WAAW,EAAC,OAA7C;AAAqD,MAAA,GAAG,EAAEhB,QAAQ,CAAC;AAAEgB,QAAAA,QAAQ,EAAE;AAAZ,OAAD;AAAlE;AAAA;AAAA;AAAA;AAAA,YAFF,eAGE;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAuB,MAAA,IAAI,EAAC,UAA5B;AAAuC,MAAA,WAAW,EAAC,UAAnD;AAA8D,MAAA,GAAG,EAAEhB,QAAQ,CAAC;AAAEgB,QAAAA,QAAQ,EAAE;AAAZ,OAAD;AAA3E;AAAA;AAAA;AAAA;AAAA,YAHF,eAII;AAAO,MAAA,IAAI,EAAC;AAAZ;AAAA;AAAA;AAAA;AAAA,YAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AAQA,CA9BD;;GAAMpB,Q;UACYJ,W,EACEC,W,EAE+BJ,O,EAClCM,U;;;KALXC,Q;AAgCN,eAAeA,QAAf","sourcesContent":["import React from 'react';\nimport { useForm } from \"react-hook-form\";\nimport Cookies from 'js-cookie'\nimport { Redirect } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { logIn } from 'actions';\nimport { useHistory } from 'react-router-dom';\nimport './Register.scss';\n\nconst Register = () => {\n\tconst isLogged = useSelector(state => state.isLogged);\n  \tconst dispatch = useDispatch();\n\n\tconst { register, handleSubmit, watch, errors } = useForm();\n\tconst history = useHistory();\n  \tconst onSubmit = data => {\n  \t\tconsole.log(data);\n  \t\tfetch('http://localhost:1337/auth/local/register', {\n  \t\t  method: 'post',\n  \t\t  headers: {\n    \t\t'Content-Type': 'application/json'\n  \t\t  },\n  \t\t  body: JSON.stringify(data)\n\t\t});\n\t\t//wait for response (then response, data to JSON)\n\t\t//catch errors\n\t\t//cookie\n\t\tdispatch(logIn());\n\t\thistory.push(\"/\");\n  \t}\n\n\treturn (\n\t\t<form onSubmit={handleSubmit(onSubmit)} className=\"Register\">\n\t\t  <input name=\"username\" type=\"text\" placeholder=\"username\" ref={register({ required: true })} />\n\t\t  <input name=\"email\" type=\"email\" placeholder=\"email\" ref={register({ required: true })} />\n\t\t  <input name=\"password\" type=\"password\" placeholder=\"password\" ref={register({ required: true })} />\n\t  \t  <input type=\"submit\" />\n\t    </form>\n\t);\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}